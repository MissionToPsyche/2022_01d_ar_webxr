<head>
	<title>My A-Frame Scene</title>
	<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
	<!-- A-timeline scripts -->
	<script src="https://unpkg.com/aframe-animation-component@^4.1.1/dist/aframe-animation-timeline-component.min.js"></script> 
	<script src="https://unpkg.com/aframe-animation-timeline-component@1.6.0/dist/aframe-animation-timeline-component.min.js"></script>
	<!-- Particle scripts--> 
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-particle-system-component@master/dist/aframe-particle-system-component.min.js"></script> 
</head>

  <body>
	<a-scene animation-timeline__1="timeline: #myTimeline; loop: true">
		<a-assets timeout="10000">
		  <a-asset-item src="https://cdn.aframe.io/fonts/Roboto-msdf.json"></a-asset-item>

		  <a-timeline id="myTimeline">
			<!-- Intro text animation-->
			<a-timeline-animation select="#introText" name="togglevisible"></a-timeline-animation>
			<a-timeline-animation select="#introText" name="fadein"></a-timeline-animation>
			<a-timeline-animation select="#introText" name="fadeout"></a-timeline-animation>
			<a-timeline-animation select="#introText" name="togglevisibleoff"></a-timeline-animation>

			<!-- Planetesimal appearing animation -->
			<a-timeline-animation select="#Planetesimal" name="scale"></a-timeline-animation>

			<!-- Text about asteroid impact animation-->
			<a-timeline-animation select="#text1" name="togglevisible"></a-timeline-animation>
			<a-timeline-animation select="#text1" name="fadein"></a-timeline-animation>
			<a-timeline-animation select="#text1" name="fadeout"></a-timeline-animation>
			<a-timeline-animation select="#text1" name="togglevisibleoff"></a-timeline-animation>

			<!-- Asteroid appearing animations -->
			<a-timeline-animation select="#Asteroid" name="scale"></a-timeline-animation>
			<a-timeline-animation select="#Asteroid" name="move_towards_planetesimal"></a-timeline-animation>
			
			<a-timeline-group>
				<a-timeline-animation select="#Particles" name="enable"></a-timeline-animation>
				<a-timeline-animation select="#Asteroid" name="bounce_off"></a-timeline-animation>
			</a-timeline-group>

			<!-- Crust stripped text animations-->
			<a-timeline-animation select="#text2" name="togglevisible"></a-timeline-animation>
			<a-timeline-animation select="#text2" name="fadein"></a-timeline-animation>
			<a-timeline-animation select="#text2" name="fadeout"></a-timeline-animation>
			<a-timeline-animation select="#text2" name="togglevisibleoff"></a-timeline-animation>

			<!-- Core hardening text animations-->
			<a-timeline-animation select="#text3" name="togglevisible"></a-timeline-animation>
			<a-timeline-animation select="#text3" name="fadein"></a-timeline-animation>
			<a-timeline-animation select="#text3" name="fadeout"></a-timeline-animation>
			<a-timeline-animation select="#text3" name="togglevisibleoff"></a-timeline-animation>

			<!-- Smaller asteroid impacts text animations-->
			<a-timeline-animation select="#text4" name="togglevisible"></a-timeline-animation>
			<a-timeline-animation select="#text4" name="fadein"></a-timeline-animation>
			<a-timeline-animation select="#text4" name="fadeout"></a-timeline-animation>
			<a-timeline-animation select="#text4" name="togglevisibleoff"></a-timeline-animation>

			<!-- How psyche looks today text animations-->
			<a-timeline-animation select="#text5" name="togglevisible"></a-timeline-animation>
			<a-timeline-animation select="#text5" name="fadein"></a-timeline-animation>
			<a-timeline-animation select="#text5" name="fadeout"></a-timeline-animation>
			<a-timeline-animation select="#text5" name="togglevisibleoff"></a-timeline-animation>

		  </a-timeline>

		  <img id="skyTexture"
		  	src="./images/stars background.jpg">

		  <a-asset-item
			  id="planetesimal-model"
			  src="../../models/gltf/planetesimal/scene.gltf">
		  </a-asset-item>

		  <a-asset-item
			id="asteroid-model"
			src="../../models/gltf/otherAsteroid/scene.gltf">
		  </a-asset-item>

		  <a-mixin id="spaceRockMixin"
			animation__rotate="property: rotation; to: 0 360 0; easing: linear; dur: 50000; autoplay: true; loop: true"
		  ></a-mixin>

		  <a-mixin id="text"
			text="align: center; color: #FFF; width: 6; opacity: 0"
			animation__fadein="property: text.opacity; from: 0; to: 1; dur: 3000; easing: linear; autoplay: false"
			animation__fadeout="property: text.opacity; from: 1; to: 0; dur: 3000; easing: linear; autoplay: false"
			animation__togglevisible="property: visible; from: false; to: true; dur: 1; autoplay: false"
			animation__togglevisibleoff="property: visible; from: true; to: false; dur: 1; autoplay: false"
			position="0 3 -3"
			visible="false">
		  </a-mixin>
		</a-assets>

		<!-- Particle system uses 'default' preset, setting custom colors. -->
		<a-entity id="Particles" 
			position="0 0 -7"
			animation__enable="property: particle-system.enabled; from: false; to: true; dur:1; autoplay: false"
			animation__disable="property: particle-system.enabled; from: true; to: false; dur:1; autoplay: false"
			particle-system="enabled:false; texture: images/smokeparticle.png; particleCount:10000; color: #FF0000,#444400; velocityValue: 0 0 0; accelerationSpread: 0 0 0; accelerationValue: 0 0 0; maxAge: 1.5"></a-entity>

		<!-- Background -->
		<a-sky src="#skyTexture"></a-sky>

		<a-entity id="introText" mixin="text" text="value: How do scienctists think Psyche formed?"></a-entity>
		<a-entity id="text1" mixin="text" text="value: It is theorized that an outside body, or bodies, impacted Psyche"></a-entity>
		<a-entity id="text2" mixin="text" text="value: These impacts stripped the mantle and crust off of psyche"></a-entity>
		<a-entity id="text3" mixin="text" text="value: The remaining molten core began to harden"></a-entity>
		<a-entity id="text4" mixin="text" text="value: Smaller objects continued to impact Psyche"></a-entity>
		<a-entity id="text5" mixin="text" text="value: And this is how Psyche looks today"></a-entity>

		<!-- Planetesimal -->
		<a-gltf-model
			id="Planetesimal" 
			mixin="spaceRockMixin"
			src="#planetesimal-model"
			position="0 0 -10"
			rotation="0 0 0"
			scale="0 0 0"
			animation__scale="property: scale; to: 0.005 0.005 0.005; dur: 2000; easing: easeInOutElastic; autoplay: false"
		></a-gltf-model>

		<!-- Other Asteroid -->
		<a-gltf-model 
			id="Asteroid" 
			mixin="spaceRockMixin"
			src="#asteroid-model"
			position="10 0 -1"
			rotation="0 0 0"
			scale="0 0 0"
			animation__rotate="property: rotation; to: 0 360 0; autoplay: true; loop: true; dur: 10000"
			animation__scale="property: scale; to: 0.01 0.01 0.01; dur: 2000; easing: easeInOutElastic; autoplay: false"
			animation__move_towards_planetesimal="property: position; to: 2 0 -7; easing:linear; autoplay:false; dur: 5000"
			animation__bounce_off="property: position; from: 2 0 -7; to: 0 20 -11; easing:linear; autoplay:false; dur: 7500">
		</a-gltf-model>
	</a-scene>
  </body>
