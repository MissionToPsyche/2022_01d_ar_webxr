<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
        <title>Psyche</title>
        <script src="https://raw.githack.com/AR-js-org/AR.js/dev/aframe/build/aframe-ar.js"></script>
    </head>
    <body>
        <script src="adventure.js"></script>
        <a-scene>
            <!-- Main scen setup elements -->
            <a-camera wasd-controls-enabled="false">
                <a-cursor
                    material="color:grey"
                ></a-cursor>
                <a-entity
                    id="main-tasks"
                    geometry="primitive:plane;"
                    material="color:white;"
                    scale="2.5 1.8"
                    position="-4 3 -10">
                    <a-text
                        value="Mission Tasks"
                        color="black"
                        width="3"
                        height="2"
                        position="-0.5 0.35 0.1"
                    ></a-text>
                    <a-text
                        id="task1"
                        value="Scale the Moon"
                        color="red"
                        width="2.5"
                        height="1"
                        position="-0.5 0.1 0.1"
                    ></a-text>
                    <a-text
                        id="task2"
                        value="Shape Psyche"
                        color="red"
                        width="2.5"
                        height="1"
                        position="-0.5 -0.05 0.1"
                    ></a-text>
                    <a-text
                        id="task3"
                        value="Find Psyche in orbit"
                        color="red"
                        width="2.5"
                        height="1"
                        position="-0.5 -0.20 0.1"
                    ></a-text>
                    <a-text
                        id="task4"
                        value="Weigh Psyche"
                        color="red"
                        width="2.5"
                        height="1"
                        position="-0.5 -0.35 0.1"
                    ></a-text>
                    <a-entity
                        id="task-crossed"
                        line="start: -0.46 0.07 0.2; end: 0.54 0.07 0.2; color: red; visible:false"
                        line__2="start: -0.46 -0.08 0.2; end: 0.54 -0.08 0.2; color: red; visible:false"
                        line__3="start: -0.46 -0.22 0.2; end: 0.54 -0.22 0.2; color: red; visible:false"
                        line__4="start: -0.46 -0.36 0.2; end: 0.54 -0.36 0.2; color: red; visible:false">
                    </a-entity>
                </a-entity>
                <a-light type="directional" color="#FFF" intensity="1.5" position="0 0 10"></a-light>
            </a-camera>
            
            <a-sky id="background" src="../../src/img/blackbackground.jpg"></a-sky>

            <!-- Pyche Model -->
            <a-image
                id="asteroid-shape" 
                position="1 1.09 -5"
                scale="0.8 0.8 0.8" 
                src="../../src/img/psyche-asteroid.png"
            ></a-image>
            
            <!-- Moon Model -->
            <a-gltf-model
                id="moon"
                visible="true"
                scale="0.3 0.3 0.3"
                src="../../models/gltf/planets/moon.glb"
                position="-1 1.09 -5"
                event-set__enter="_event: click; property:scale; animation.to: 1.2 1.2 1.2; animation.dur: 3000; animation.easing: linear;"
            ></a-gltf-model>

            <!-- Info Text -->
            <a-text
                id="info"
                color="#03cffc" 
                position="-2.2 3.9 -10" 
                value="-- Scientists estimate if Psyche were a perfect sphere, it would have a diameter of 140 miles 
                       \n\n -- That is roughly the distance from Los Angeles to San Francisco 
                       \n\n -- Psyche has an irregular 
                       \n\n -- It's estimated to be 1/16 the diameter of"
                z-offset="0.15" 
                height="5" 
                width="5">
                <!-- Ellipsoid Animation Button -->
                <a-entity 
                    asteroidshape
                    position="3 -0.55 0" 
                    geometry="primitive: plane; height:0.5;width:1.1"
                    visible="true" 
                    material="transparent:true; opacity:0;"
                    event-set__enter="_event: click; _target: #asteroid-shape; animation.property:scale; animation.to: 1.2 0.8 1; animation.dur: 3000; animation.easing: linear;">
                    <!-- Ellipsoid Button Text -->
                    <a-text
                        id="jacobi"
                        color="yellow" 
                        visible="true"
                        position="-0.5 0 0" 
                        value="shape" 
                        height="7" 
                        width="7">
                    </a-text>
                </a-entity>
                <!-- Moon Animation Button -->
                <a-entity 
                    moontask
                    position="5.3 -1.25 0" 
                    geometry="primitive: plane; height:0.5; width:2.2;"
                    visible="true"
                    material="transparent:true; opacity:0"
                    event-set__enter="_event: click; _target: #moon; animation.property:scale; animation.to: 1 1 1; animation.dur: 3000; animation.easing: linear;">
                    <!-- Moon Button Text -->
                    <a-text
                        id="earths-moon"
                        color="yellow" 
                        position="-1.1 0 0" 
                        value="EARTH'S MOON" 
                        height="7" 
                        width="7">
                    </a-text>
                </a-entity>
            </a-text>

            <!-- Return Button -->
            <a-text 
                id="return-button-text"
                color="black" 
                position="0 -2 -10" 
                value="Return"
                z-offset="0.15" 
                height="5" 
                width="5" 
                align="center">
                <a-entity 
                    event-set__enter="_event: mouseenter; material.color:#03cffc; geometry.height:0.7; geometry.width:2.2"
                    event-set__leave="_event: mouseleave; material.color:grey; geometry.height:0.4; geometry.width:1.5"
                    id="return-button"  
                    visible="true" 
                    geometry="primitive: box; width:1.5; height:0.4; depth:0.01" 
                    material="color:grey"
                    position="0 0 0" 
                    link="href:adventure.html">
                </a-entity>
            </a-text>

            <!-- Hint -->
            <a-text
                id="hint"
                visible="false"
                value="Try clicking the words Shape and Earth's Moon"
                position="1.8 -1.15 -10"
            ></a-text>

            <a-text                   
                    id="hint-button-text-1"
                    color="black"
                    position="4 -1.7 -10"
                    value="Hint"
                    z-offset="0.15"
                    height="5"
                    width="5"
                    align="center">
                <a-entity     
                    event-set__enter="_event: mouseenter; material.color:#03cffc; geometry.height:0.7; geometry.width:2.2"
                    event-set__leave="_event: mouseleave; material.color:grey; geometry.height:0.4; geometry.width:1.5"  
                    hint             
                    id="hint-button-1" 
                    visible="true"
                    geometry="primitive: box; width:1.5; height:0.4; depth:0.05" 
                    material="color:grey"
                    position="0 0 0">       
                </a-entity>
            </a-text>

            <!-- Asteroid Reset Button -->
            <a-entity
                event-set__enter="_event: click; _target:#asteroid-shape; animation.property:scale; animation.to: 0.8 0.8 0.8; animation.dur: 3000; animation.easing: linear;"
                id="moon-reset-button"  
                visible="true" 
                geometry="primitive: box; width:1; height:0.4; depth:0.01" 
                material="color:grey"
                position="2 -1.7 -10">       
                <a-text
                    color="black"
                    value="Reset"
                    position="0 0 0.1"
                    align="center"
                ></a-text> 
            </a-entity>

            <!-- Moon Reset Button -->
            <a-entity
                event-set__enter="_event: click;_target:#moon; animation.property:scale; animation.to: 0.3 0.3 0.3; animation.dur: 3000; animation.easing: linear;"
                id="asteroid-reset-button"  
                visible="true" 
                geometry="primitive: box; width:1; height:0.4; depth:0.01" 
                material="color:grey"
                position="-2 -1.7 -10">       
                <a-text
                    color="black"
                    value="Reset"
                    position="0 0 0.1"
                    align="center"
                ></a-text> 
            </a-entity>
        </a-scene>
        <script type="text/javascript">
            if(sessionStorage.getItem('task1') === "true"){
              document.getElementById('task1').setAttribute('color','green');
              document.getElementById('task-crossed').setAttribute('line','{start: -0.46 0.07 0.2; end: 0.54 0.07 0.2; color: grey; visible:true}');
            }
            if(sessionStorage.getItem('task2') === "true"){
              document.getElementById('task2').setAttribute('color','green');
              document.getElementById('task-crossed').setAttribute('line__2','{start: -0.46 -0.08 0.2; end: 0.54 -0.08 0.2; color: grey; visible:true}');
            }
            if(sessionStorage.getItem('task3') === "true"){
              document.getElementById('task3').setAttribute('color','green');
              document.getElementById('task-crossed').setAttribute('line__3','{start: -0.46 -0.22 0.2; end: 0.54 -0.22 0.2; color: grey; visible:true}');
            }
            if(sessionStorage.getItem('task4') === "true"){
              document.getElementById('task4').setAttribute('color','green');
              document.getElementById('task-crossed').setAttribute('line__4','{start: -0.46 -0.36 0.2; end: 0.54 -0.36 0.2; color: grey; visible:true}');
            }
          </script>
    </body>
</html>
