<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
        <title>Psyche</title>
        <script src="https://raw.githack.com/AR-js-org/AR.js/dev/aframe/build/aframe-ar.js"></script>
    </head>
    <body>
        <script src="adventure.js"></script>
        <a-scene>
            <a-camera wasd-controls-enabled="false">
                <a-cursor
                    material="color:grey"
                ></a-cursor>
                    <a-entity
                        id="main-tasks"
                        geometry="primitive:plane;"
                        material="color:white;"
                        scale="2.5 1.8"
                        position="-4 3 -10">
                        <a-text
                            value="Mission Tasks"
                            color="black"
                            width="3"
                            height="2"
                            position="-0.5 0.35 0.1"
                        ></a-text>
                        <a-text
                            id="task1"
                            value="Scale the Moon"
                            color="red"
                            width="2.5"
                            height="1"
                            position="-0.5 0.1 0.1"
                        ></a-text>
                        <a-text
                            id="task2"
                            value="Shape Psyche"
                            color="red"
                            width="2.5"
                            height="1"
                            position="-0.5 -0.05 0.1"
                        ></a-text>
                        <a-text
                            id="task3"
                            value="Find Psyche in orbit"
                            color="red"
                            width="2.5"
                            height="1"
                            position="-0.5 -0.20 0.1"
                        ></a-text>
                        <a-text
                            id="task4"
                            value="Weigh Psyche"
                            color="red"
                            width="2.5"
                            height="1"
                            position="-0.5 -0.35 0.1"
                        ></a-text>
                        <a-entity
                            id="task-crossed"
                            line="start: -0.46 0.07 0.2; end: 0.54 0.07 0.2; color: red; visible:false"
                            line__2="start: -0.46 -0.08 0.2; end: 0.54 -0.08 0.2; color: red; visible:false"
                            line__3="start: -0.46 -0.22 0.2; end: 0.54 -0.22 0.2; color: red; visible:false"
                            line__4="start: -0.46 -0.36 0.2; end: 0.54 -0.36 0.2; color: red; visible:false">
                        </a-entity>
                    </a-entity>
                    <a-light type="directional" color="#FFF" intensity="1.5" position="0 0 10"></a-light>
            </a-camera>
            
            <a-sky id="background" src="../../src/img/blackbackground.jpg"></a-sky>

            <a-assets>
                <a-asset-item id="sun" src="../../models/gltf/planets/Sun.glb"></a-asset-item>
                <a-asset-item id="mercury" src="../../models/gltf/planets/mercury.glb"></a-asset-item>
                <a-asset-item id="venus" src="../../models/gltf/planets/venus.glb"></a-asset-item>
                <a-asset-item id="earth" src="../../models/gltf/planets/earth.glb"></a-asset-item>
                <a-asset-item id="mars" src="../../models/gltf/planets/mars.glb"></a-asset-item>
            </a-assets>

            <!-- Sun Model -->
            <a-gltf-model
                src="#sun"
                id="planet-sun"
                position="0 2 -20"
                scale="7.5 7.5 7.5"
            ></a-gltf-model>

            <!-- Parent element for Mercury model for revolution -->
            <a-entity position="0 2 -20" animation = "property: rotation; to: 0 0 360; loop: true; dur: 8800; easing: linear">
                <!-- Mercury Model -->
                <a-gltf-model
                    src="#mercury"
                    id="planet-mercury"
                    position="0 -1.66 0"
                    scale="2.2 2.2 2.2">
                    <!-- Mercury Title tethered to planet model -->
                    <a-text 
                        position="0 0 0" 
                        value="\n\nMercury" 
                        align="center" 
                        animation = "property: rotation; to: 0 0 -360; loop: true; dur: 8800; easing: linear"
                    ></a-text>
                </a-gltf-model>
            </a-entity>
           
            <!-- Parent element for Venus model for revolution -->
            <a-entity position="0 2 -20" animation = "property: rotation; to: 0 0 360; loop: true; dur: 22500; easing: linear">
                <!-- Venus Model -->
                <a-gltf-model
                    src="#venus"
                    id="planet-venus"
                    position="3 0 0"
                    scale="2.2 2.2 2.2">
                    <!-- Venus Title tethered to planet model -->
                    <a-text 
                        position="0 0 0" 
                        value="\n\nVenus" 
                        align="center" 
                        animation = "property: rotation; to: 0 0 -360; loop: true; dur: 22500; easing: linear"
                    ></a-text>
                </a-gltf-model>
            </a-entity>

            <!-- Parent element for Earth model for revolution -->
            <a-entity position="0 2 -20" animation = "property: rotation; to: 0 0 360; loop: true; dur: 36500; easing: linear">
                <!-- Earth Model -->
                <a-gltf-model
                    src="#earth"
                    id="planet-earth"
                    position="-4.33 0 0"
                    scale="2.2 2.2 2.2">
                    <!-- Earth Title tethered to planet model -->
                    <a-text 
                        position="0 0 0" 
                        value="\n\nEarth" 
                        align="center" 
                        animation = "property: rotation; to: 0 0 -360; loop: true; dur: 36500; easing: linear"
                    ></a-text>
                </a-gltf-model>
            </a-entity>

            <!-- Parent element for Mars model for revolution -->
            <a-entity position="0 2 -20" animation = "property: rotation; to: 0 0 360; loop: true; dur: 68700; easing: linear">
                <!-- Mars Model -->
                <a-gltf-model
                    src="#mars"
                    id="planet-mars"
                    position="0 -5.66 0"
                    scale="2.2 2.2 2.2">
                    <!-- Mars Title tethered to planet model -->
                    <a-text 
                        position="0 0 0" 
                        value="\n\nMars" 
                        align="center" 
                        animation = "property: rotation; to: 0 0 -360; loop: true; dur: 68700; easing: linear"
                    ></a-text>
                </a-gltf-model>
            </a-entity>
                
            <!-- Parent element for Psyche model for revolution -->
            <a-entity position="0 2 -20" animation = "property: rotation; to: 0 0 360; loop: true; dur: 182700; easing: linear">
                <!-- Psyche Model -->
                <a-image
                    asteroidorbit
                    id="asteroid-orbit" 
                    position="0 7 0"
                    scale="0.5 0.5 0.5" 
                    src="../../src/img/psyche-asteroid.png">
                    <!-- Psyche Title tethered to model -->
                    <a-text 
                        position="0 0 0" 
                        value="\n\nPsyche" 
                        color="yellow" 
                        align="center" 
                        height="20" 
                        width="20" 
                        animation = "property: rotation; to: 0 0 -360; loop: true; dur: 182700; easing: linear"
                    ></a-text>
                </a-image>
            </a-entity>

            <!-- Return Button -->
            <a-text 
                id="back-button"
                color="black" 
                position="0 -2.2 -10" 
                value="Return"
                z-offset="0.15" 
                height="5" 
                width="5" 
                align="center">
                <a-entity 
                    event-set__enter="_event: mouseenter; material.color:#03cffc; geometry.height:0.7; geometry.width:2.2"
                    event-set__leave="_event: mouseleave; material.color:grey; geometry.height:0.4; geometry.width:1.5"
                    id="button" 
                    visible="true" 
                    geometry="primitive: box; width:1.5; height:0.4; depth:0.01"
                    material="color:grey"
                    position="0 0 0"
                    link="href:adventure.html">
                </a-entity>
            </a-text>

            <!-- Hint -->
            <a-text
                id="hint"
                visible="false"
                value="Find and Click the Psyche Asteroid"
                position="2.1 -1.15 -10"
            ></a-text>
            <a-text
                    color="black"
                    value="Hint"
                    position="4 -1.7 -10"
                    z-offset="0.15"
                    height="5"
                    width="5"
                    align="center">
                <a-entity
                    event-set__enter="_event: mouseenter; material.color:#03cffc; geometry.height:0.7; geometry.width:2.2"
                    event-set__leave="_event: mouseleave; material.color:grey; geometry.height:0.4; geometry.width:1.5"
                    id="hint-button" 
                    hint
                    visible="true"
                    geometry="primitive: box; width:1; height:0.4; depth:0.01" 
                    material="color:grey"
                    position="0 0 0">       
                </a-entity>
            </a-text>

        </a-scene>
        <script type="text/javascript">
            if(sessionStorage.getItem('task1') === "true"){
              document.getElementById('task1').setAttribute('color','green');
              document.getElementById('task-crossed').setAttribute('line','{start: -0.46 0.07 0.2; end: 0.54 0.07 0.2; color: grey; visible:true}');
            }
            if(sessionStorage.getItem('task2') === "true"){
              document.getElementById('task2').setAttribute('color','green');
              document.getElementById('task-crossed').setAttribute('line__2','{start: -0.46 -0.08 0.2; end: 0.54 -0.08 0.2; color: grey; visible:true}');
            }
            if(sessionStorage.getItem('task3') === "true"){
              document.getElementById('task3').setAttribute('color','green');
              document.getElementById('task-crossed').setAttribute('line__3','{start: -0.46 -0.22 0.2; end: 0.54 -0.22 0.2; color: grey; visible:true}');
            }
            if(sessionStorage.getItem('task4') === "true"){
              document.getElementById('task4').setAttribute('color','green');
              document.getElementById('task-crossed').setAttribute('line__4','{start: -0.46 -0.36 0.2; end: 0.54 -0.36 0.2; color: grey; visible:true}');
            }
          </script> 
    </body>    
</html>